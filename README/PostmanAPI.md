- [Influencer](#influencer)
  - [1. 스트림 키 생성 및 불러오기](#1-스트림-키-생성-및-불러오기)
      - [URL](#url)
      - [필요 조건](#필요-조건)
      - [추가 설명](#추가-설명)
  - [2. 스트림 키 재발급](#2-스트림-키-재발급)
      - [URL](#url-1)
      - [필요 조건](#필요-조건-1)
      - [추가 설명](#추가-설명-1)
  - [3. 인플루엔서 정보 변경](#3-인플루엔서-정보-변경)
      - [URL](#url-2)
      - [필요 조건](#필요-조건-2)
      - [추가 설명](#추가-설명-2)
  - [4. 인플루엔서 배경 썸네일 추가/변경](#4-인플루엔서-배경-썸네일-추가변경)
      - [URL](#url-3)
      - [필요 조건](#필요-조건-3)
      - [추가 설명](#추가-설명-3)
  - [5. 인플루엔서가 촬영한 VOD 불러오기](#5-인플루엔서가-촬영한-vod-불러오기)
      - [URL](#url-4)
      - [필요 조건](#필요-조건-4)
      - [추가 설명](#추가-설명-4)
  - [6. 인플루엔서가 촬영한 상품 불러오기](#6-인플루엔서가-촬영한-상품-불러오기)
      - [URL](#url-5)
      - [필요 조건](#필요-조건-5)
      - [추가 설명](#추가-설명-5)
  - [7. 인플루엔서가 예약한 방송 불러오기](#7-인플루엔서가-예약한-방송-불러오기)
      - [URL](#url-6)
      - [필요 조건](#필요-조건-6)
      - [추가 설명](#추가-설명-6)
  - [8. 현재 라이브 중인 인플루엔서](#8-현재-라이브-중인-인플루엔서)
      - [URL](#url-7)
      - [필요 조건](#필요-조건-7)
      - [추가 설명](#추가-설명-7)
  - [9. 인플루엔서 한 명 불러오기](#9-인플루엔서-한-명-불러오기)
      - [URL](#url-8)
      - [필요 조건](#필요-조건-8)
      - [추가 설명](#추가-설명-8)
  - [10. 인플루엔서 불러오기 (인기순, 신규순)](#10-인플루엔서-불러오기-인기순-신규순)
    - [URL](#url-9)
      - [필요 조건](#필요-조건-9)
      - [추가 설명](#추가-설명-9)
- [Auth](#auth)
  - [1. 로그인](#1-로그인)
      - [URL](#url-10)
      - [필요 조건](#필요-조건-10)
      - [추가 설명](#추가-설명-10)
  - [2. 아이디 찾기](#2-아이디-찾기)
      - [URL](#url-11)
      - [필요 조건](#필요-조건-11)
      - [추가 설명](#추가-설명-11)
  - [3. 비밀번호 찾기](#3-비밀번호-찾기)
      - [URL](#url-12)
      - [필요 조건](#필요-조건-12)
      - [추가 설명](#추가-설명-12)
  - [4. 소셜 로그인](#4-소셜-로그인)
- [Images](#images)
      - [URL](#url-13)
      - [필요 조건](#필요-조건-13)
      - [추가 설명](#추가-설명-13)
- [User](#user)
  - [1. 사용자 정보 불러오기](#1-사용자-정보-불러오기)
      - [URL](#url-14)
      - [필요 조건](#필요-조건-14)
      - [추가 설명](#추가-설명-14)
  - [2. 사용자 정보 수정](#2-사용자-정보-수정)
      - [URL](#url-15)
      - [필요 조건](#필요-조건-15)
      - [추가 설명](#추가-설명-15)
  - [3. 회원가입](#3-회원가입)
      - [URL](#url-16)
      - [필요 조건](#필요-조건-16)
      - [추가 설명](#추가-설명-16)
  - [4. 닉네임 중복 확인](#4-닉네임-중복-확인)
      - [URL](#url-17)
      - [필요 조건](#필요-조건-17)
      - [추가 설명](#추가-설명-17)
  - [5. 인플루엔서 팔로잉](#5-인플루엔서-팔로잉)
      - [URL](#url-18)
      - [필요 조건](#필요-조건-18)
      - [추가 설명](#추가-설명-18)
  - [6. 팔로잉한 인플루엔서 목록 불러오기](#6-팔로잉한-인플루엔서-목록-불러오기)
      - [URL](#url-19)
      - [필요 조건](#필요-조건-19)
      - [추가 설명](#추가-설명-19)
  - [7. VOD 좋아요 목록 불러오기](#7-vod-좋아요-목록-불러오기)
      - [URL](#url-20)
      - [필요 조건](#필요-조건-20)
      - [추가 설명](#추가-설명-20)
  - [8. VOD 좋아요](#8-vod-좋아요)
      - [URL](#url-21)
      - [필요 조건](#필요-조건-21)
      - [추가 설명](#추가-설명-21)
- [WishLlist](#wishllist)
  - [1. 좋아요 목록 불러오기](#1-좋아요-목록-불러오기)
      - [URL](#url-22)
      - [필요 조건](#필요-조건-22)
      - [추가 설명](#추가-설명-22)
  - [2. 좋아요 추가](#2-좋아요-추가)
      - [URL](#url-23)
      - [필요 조건](#필요-조건-23)
      - [추가 설명](#추가-설명-23)
  - [3. 좋아요 삭제](#3-좋아요-삭제)
      - [URL](#url-24)
      - [필요 조건](#필요-조건-24)
      - [추가 설명](#추가-설명-24)
- [Media](#media)
  - [1. 방송예약/ 시작/ 수정/ 종료 / 삭제](#1-방송예약-시작-수정-종료--삭제)
      - [URL](#url-25)
      - [필요 조건](#필요-조건-25)
      - [추가 설명](#추가-설명-25)
  - [2. 오늘 방송 일정 불러오기(live)](#2-오늘-방송-일정-불러오기live)
  - [3. 오늘 방송 일정 불러오기(ready)](#3-오늘-방송-일정-불러오기ready)
  - [4. 미래 방송 일정 불러오기](#4-미래-방송-일정-불러오기)
  - [5. 아직 시작하지 않은 모든 방송 불러오기](#5-아직-시작하지-않은-모든-방송-불러오기)
  - [6. 핫한 방송 불러오기(누적시청자수순)](#6-핫한-방송-불러오기누적시청자수순)
  - [7. 상품 관련 영상 불러오기(콜렉션 id 필요)](#7-상품-관련-영상-불러오기콜렉션-id-필요)

코드 관련 자세한 설명들을 모두 주석으로 달아놓았습니다.

전체적인 흐름에 대해서만 설명합니다.

# Influencer 

is_influencer 데코레이터는 인플루엔서 여부를 확인하고 

해당 사용자 정보를 반환한다.

## 1. 스트림 키 생성 및 불러오기 

#### URL 

    GET https://www.byeolshowco.com/influencer/streamkey/

#### 필요 조건

    Headers에 Custom-Token 필요

#### 추가 설명

    없으면 생성 있으면 스트림 키를 불러옵니다.

    해당 정보는 Clayful meta 정보 Stream_key에 저장합니다.

## 2. 스트림 키 재발급

#### URL 

    GET https://www.byeolshowco.com/influencer/reset/

#### 필요 조건

    Headers에 Custom-Token 필요

#### 추가 설명

    없으면 생성 오류 있으면 스트림 키를 재생성합니다.

    해당 정보는 Clayful meta 정보 Stream_key에 저장합니다.


## 3. 인플루엔서 정보 변경

#### URL 
    
    POST https://www.byeolshowco.com/influencer/update/

#### 필요 조건

    로그인 + 인플루엔서만 사용 가능

#### 추가 설명

    인플루엔서 인삿말과 태그를 저장

    해당 정보는 Clayful meta 정보 description, tag에 저장합니다.

    description은 짧은 텍스트로 저장

    tag는 짧은 텍스트 배열로 저장

## 4. 인플루엔서 배경 썸네일 추가/변경 

#### URL

    https://www.byeolshowco.com/images/influencer/

    POST: 추가/수정

    Delete: 삭제 

#### 필요 조건

    로그인 + 인플루엔서만 사용 가능

#### 추가 설명

    Clayful은 배경 썸네일과 아바타 이미지 구분이 없기 때문에 

    둘다 'model': (None, 'Customer'), 'application': (None, 'avatar')에 저장한다.

    즉, 해당 user가 Clayful에서 자신이 저장한 사진을 불러왔을 때 최대 2개 최소 0개이다.

    1. 사진이 2개 -> 사용자 정보의 avatar와 다른 사진 변경
    2. 사진이 1개, avatar 존재 x -> 해당 사진 변경
    3. 사진이 1개, avatar 존재 -> 해당 사진 새로 추가
    4. 사진 0개 -> 해당 사진 새로 추가

    해당 사진 url은 Clayful meta정보 thumbnail_url에서 따로 관리한다.

## 5. 인플루엔서가 촬영한 VOD 불러오기

#### URL

    GET https://www.byeolshowco.com/influencer/myvod/

#### 필요 조건

    모든 사람들이 사용 가능

    파라미터로 influencer_id 필요

#### 추가 설명

    해당 인플루엔서가 촬영한 + status가 completed인 VOD의 상품리스트를 더해 

    모든 상품을 Clayful에서 불러옴.

## 6. 인플루엔서가 촬영한 상품 불러오기

#### URL 

    GET https://www.byeolshowco.com/influencer/myproduct/

#### 필요 조건

    모든 사람들이 사용 가능

    파라미터로 influencer_id 필요

#### 추가 설명

    MediaStream 테이블에서 status가 live인 인플루엔서 출력

## 7. 인플루엔서가 예약한 방송 불러오기

#### URL 

    GET https://www.byeolshowco.com/influencer/myreadyvod/

#### 필요 조건

    로그인 + 인플루엔서만 사용 가능

#### 추가 설명

    MediaStream 테이블에서 status가 live인 인플루엔서 출력

## 8. 현재 라이브 중인 인플루엔서 

#### URL

    GET https://www.byeolshowco.com/influencer/list/live/

#### 필요 조건

    모든 사람들이 사용 가능

#### 추가 설명

    MediaStream 테이블에서 status가 live인 인플루엔서 출력

## 9. 인플루엔서 한 명 불러오기

#### URL

    GET https://www.byeolshowco.com/influencer/info/

#### 필요 조건

    모든 사람들이 사용 가능

    파라미터로 influencer_id 필요

#### 추가 설명

    해당 인플루엔서 정보를 불러옴

## 10. 인플루엔서 불러오기 (인기순, 신규순)

### URL
    
    GET https://www.byeolshowco.com/influencer/list/<str:sort_by>/

#### 필요 조건

    모든 사람들이 사용 가능

#### 추가 설명

    인플루엔서들을 모두 불러와 정렬

# Auth

## 1. 로그인

#### URL

    POST https://www.byeolshowco.com/user/auth/

#### 필요 조건

    userId, password 필요

#### 추가 설명

    Clayful에 로그인 시킨 후 Custom-Token을 응답.

## 2. 아이디 찾기

#### URL

    POST https://www.byeolshowco.com/forgetuser/find_id/

#### 필요 조건

    email 필요

#### 추가 설명

    가입할 때 기입한 이메일에 해당하는 id를 앞에 4글자만 표기.

    소셜로그인시 소셜로그인했다고 알림.


## 3. 비밀번호 찾기

#### URL

    POST https://www.byeolshowco.com/forgetuser/get_certificate/

#### 필요 조건

    userId와 email 필요

#### 추가 설명

    해당 이메일로 비밀번호를 바꿀 수 있는 링크를 제공

    링크 클릭 시 임의의 새로운 password을 알려준다. 

## 4. 소셜 로그인

    네이버, 카카오, 페이스북 개발자 가이드에 알맞게 개발

    상태코드 받아오고 access token을 획득 후

    Clayful에 넘겨서 로그인/회원가입을 하고 

    정보들을 update한다.

# Images

#### URL

    https://www.byeolshowco.com/images/

    GET : 불러오기

    POST : 추가/ 수정

    DELETE : 삭제

#### 필요 조건

    로그인 + 사진

#### 추가 설명

    Clayful은 배경 썸네일과 아바타 이미지 구분이 없기 때문에 

    둘다 'model': (None, 'Customer'), 'application': (None, 'avatar')에 저장한다.

    1. avatar 존재 x -> 해당 사진 새로 추가
    2. avatar 존재 -> 해당 사진 변경

    Clayful에 사진 저장 후 

    해당 사진 사용자의 avatar 정보를 업데이트한다.

# User

require_login 데코레이터는 로그인 여부를 확인하고 

해당 사용자 정보를 반환한다.

## 1. 사용자 정보 불러오기

#### URL

    GET https://www.byeolshowco.com/user/

#### 필요 조건

    로그인 

#### 추가 설명

    해당 사용자 

## 2. 사용자 정보 수정
#### URL

    POST https://www.byeolshowco.com/user/

#### 필요 조건

    로그인

#### 추가 설명

    소셜 로그인 시 이메일/비밀번호 변경은 불가하다.

    네이티브 로그인시 이메일/비밀번호 변경은 기존의 password를 알아야한다.

    이름, 별명, 전화번호, 개인통관고유부호(unipass_number)는 두 로그인 모두 변경 가능하다.

    별명은 중복확인을 위해 name의 first에도 저장한다.
    (Clayful은 별명 search가 없다.)

## 3. 회원가입
#### URL

    GET https://www.byeolshowco.com/user/

#### 필요 조건

    여러 정보들(postman에서 확인 가능)

#### 추가 설명

    Clayful SDK를 이용해 간단히 가입하는 API

    프론트가 요구한 format으로 변경해 조금 난잡하다.

## 4. 닉네임 중복 확인

#### URL

    POST https://www.byeolshowco.com/checkalias/

#### 필요 조건

    alias 필요

#### 추가 설명

    Clayful에서는 별명에 대한 검색이 불가능하여

    name의 first 와 alias에 별명을 중복 저장하고 

    name의 first로 검색을 진행한다.

## 5. 인플루엔서 팔로잉

#### URL
    POST https://www.byeolshowco.com/user/influencer/like/

#### 필요 조건
    로그인+influencer_id
#### 추가 설명
    Clayful meta정보의 Following에 list로 저장되어 있고

    호출 시 이미 목록에 있으면 팔로잉 취소 

    호출 시 목록에 없으면 팔로잉

## 6. 팔로잉한 인플루엔서 목록 불러오기
#### URL
    GET https://www.byeolshowco.com/user/influencer/like/
#### 필요 조건
    로그인 
#### 추가 설명
    Clayful meta정보의 Following에 list로 저장되어 있고

    이 목록으로 다시 Clayful에서 해당 인플루엔서를 불러온다.
## 7. VOD 좋아요 목록 불러오기
#### URL
    GET https://www.byeolshowco.com/user/influencer/like/
#### 필요 조건
    로그인
#### 추가 설명
    Clayful meta정보의 my_vod에 목록이 저장되어 있고

    이 목록으로 MediaStream 테이블에서 해당 영상을 불러온다.
## 8. VOD 좋아요

#### URL
    POST https://www.byeolshowco.com/user/influencer/like/

#### 필요 조건
    로그인 + vod_id
#### 추가 설명
    Clayful meta정보의 my_vod에 list로 저장되어 있고

    호출 시 이미 목록에 있으면 좋아요 취소 

    호출 시 목록에 없으면 좋아요

# WishLlist
## 1. 좋아요 목록 불러오기
#### URL
    GET https://www.byeolshowco.com/wishlist/
#### 필요 조건
    로그인
#### 추가 설명
    여러개의 wishlist를 만들 수 있지만 본 앱은 1개의 wishlist만 사용한다.

    Clayful에서 불러와 반환
## 2. 좋아요 추가
#### URL
    POST https://www.byeolshowco.com/wishlist/
#### 필요 조건
    로그인, product(product_id)
#### 추가 설명
    Clayful에 이미 구현된 기능이라 추가 설명은 없다.
## 3. 좋아요 삭제
#### URL
    DELETE https://www.byeolshowco.com/wishlist/
#### 필요 조건
    로그인, product(product_id)
#### 추가 설명
    Clayful에 이미 구현된 기능이라 추가 설명은 없다.


# Media

## 1. 방송예약/ 시작/ 수정/ 종료 / 삭제
#### URL
    POST https://www.byeolshowco.com/media/reserve/
    POST https://www.byeolshowco.com/media/start/
    POST https://www.byeolshowco.com/media/edit/
    POST https://www.byeolshowco.com/media/end
    DELETE https://www.byeolshowco.com/media/delete/
#### 필요 조건
    인플루엔서 로그인 + 필요 정보들

#### 추가 설명
    예약 -> 시작 -> 종료 순

    수정/삭제는 언제든지 할 수 있다.

    시작 이전의 삭제는 MediaStream 테이블에서만 삭제
    
    시작 이후 삭제는 Mux에서도 영상 삭제.


## 2. 오늘 방송 일정 불러오기(live)

    모두 라이브 상태의 방송을 불러온다.

## 3. 오늘 방송 일정 불러오기(ready)

    정확히 현재 시간 이후 라이브 전 상태의 방송만 불러온다.

## 4. 미래 방송 일정 불러오기

    오늘 이후 라이브 전 상태의 방송 일정들을 불러온다.

## 5. 아직 시작하지 않은 모든 방송 불러오기

    모든 라이브 전 상태의 방송을 불러온다.

## 6. 핫한 방송 불러오기(누적시청자수순)

    모든 라이브를 누적시청자순으로 정렬해서 불러온다.

## 7. 상품 관련 영상 불러오기(콜렉션 id 필요)

    상품과 같은 콜렉션에 있는 상품들의 영상들을 불러온다.

